digraph {
    compound=true;
    rankdir=TD;
    outside1[ fillcolor="#ff0000", label="Group to node(MUST BE RED)", style="filled" ];
    outside3[ fillcolor="#ff0000", label="Inner group to node(MUST BE RED)", style="filled" ];
    subgraph cluster_master {
        ma[ fillcolor="#ff0000", label="ma(MUST BE RED)", style="filled" ];
        subgraph cluster_innermaster1 {
            label="BLUE group";
            style=filled;
            color="#0000ff";
            ima1[ fillcolor="#ff0000", label="ima1(MUST BE RED)", style="filled" ];
        }//end of innermaster1 undefined
        subgraph cluster_innermaster2 {
            label="GREEN group";
            style=filled;
            color="#00ff00";
            ima2[ fillcolor="#ff0000", label="ima2(MUST BE RED)", style="filled" ];
        }//end of innermaster2 undefined
    }//end of master undefined
    outside2[ fillcolor="#ffff00", label="Node to group(MUST BE YELLOW)", style="filled" ];
    outside4[ fillcolor="#ffff00", label="Node to inner group(MUST BE YELLOW)", style="filled" ];
    subgraph cluster_other {
        label="Uncolored group";
        o[ fillcolor="#ffff00", label="o(MUST BE YELLOW)", style="filled" ];
    }//end of other undefined
    //links start
    ma->ima1;
    ma->ima2;
    ima2->o;
    outside2->ma[  lhead=cluster_master ];
    ma->outside1[  ltail=cluster_master ];
    ima1->outside3[  ltail=cluster_innermaster1 ];
    outside4->ima2[  lhead=cluster_innermaster2 ];
}
