{"userlogging":"//user/actor1.png>WWW\n\n//user/actor1.png>WWW,Proxy>WWW\n\n//user/actor1.png>WWW,Proxy>WWW RECORD Proxy;Proxy|{Opera|Google|UCBrowser|???}\n\n//user/actor1.png>WWW,Proxy,PoP>WWW<Proxy\n\n//user/actor1.png user>\"IP(TCP(payload))\"WWW\n\n//user/actor1.png\n//{www;www\n// MQTT,Dymamic,GraphAPI,Logging } FNA,CDN<>user>www\n\n//{user;user\n//  Instagram,FBLite,FB4A,Messenger,FBS,XWF } user>WWW\n\n{verizon;verizon\ndotted v/actor2.png}\n{tmobile;tmobile\ndotted t/actor1.png dotted p/phone.png }\nt, v>www<proxy<p\n","rapp tests":"r;Retailer app\nd;Download controller\np;Pigeon logger\nl;Flow logger\n\n// app start\nr/>\"Run BW test\"d\nr.r;Run more tests\nr>p;Send the logs\n\nr.r;Time passes\nr>\"Run BW test\"d\nd.>\"LOG BW hit\"l\nd>\"Return content\"r\nr.r;Run other tests\nr/>p;Send the logs\n\n","xwf_old":"shape box\nphone>AP>GRE>PCEFD>tap0>iptables>INTERNET\ntap0>DNS,DHCP\nPCEFD>ipset<>iptables>nginx>authorizer>PCEFD\ncmd2ods,fbmetrics>fbstatsd\ncmd2ods>authorizer,PCEFD\n","xwf_new":"shape box\nphone>AP>INTERNET\n\n{rad;Radius\\nserver\n  coa;CoA Poller(Change of Authorization)\n  radius\n  {logging;logging\\nexists on all servers\n     cmd2ods\n     fbmetrics\n     fbstatsd\n  }\n}\n\n{tokenizer;tokenizer\n  elb>IHT1,IHT2\n}\n\nwww;FB\\nWWW\nAP<.>radius>coa>tokenizer>www\ncmd2ods,fbmetrics>fbstatsd\n\n","xwf data":"$(done:#aa0099)\n$(reference:#ff0000)\n\n// https://our.intern.facebook.com/intern/dex/express-wi-fi-backend/hphpd-snippets/\n// https://our.intern.facebook.com/intern/dex/express-wi-fi-backend/ents/\n\n//XWFEntDataPackSchema:\n//  inbound edges\n//    https://our.intern.facebook.com/intern/codex/symbol/php/XWFEntDataPackSchema/\n// https://our.intern.facebook.com/intern/id2/200716183764129/\nrect XWFEntDataPack<XWFEntPartner,XWFEntCustomer\n\n//XWFEntCustomerSchema\n//  inbound edges\n//    https://our.intern.facebook.com/intern/codex/symbol/php/XWFEntCustomerSchema/ */\n// outgoing edges\n// https://our.intern.facebook.com/intern/id2/1312995242115603/\nXWFEntCustomer>dotted LGEntSession\n\n//XWFEntRadiusSession:\n//  inbound edges\n//    https://our.intern.facebook.com/intern/codex/symbol/php/XWFEntRADIUSSession/\n//  outgoing edges\n// https://our.intern.facebook.com/intern/id2/158855251374943/\nXWFEntRADIUSSession$(done)>XWFEntPartner$(done)\n\n//XWFEntCustomerSessionSchema\n//  inbound edges\n//    https://our.intern.facebook.com/intern/codex/symbol/php/XWFEntCustomerSessionSchema/\n//  outgoing edges\n// https://our.intern.facebook.com/intern/id2/1482575078490951/\nXWFEntCustomerSession<XWFEntCustomer\n\n//XWFEntPartner\n//  inbound edges\n//    https://our.intern.facebook.com/intern/codex/symbol/php/XWFEntPartnerSchema/\n//  outgoing edges\n// https://our.intern.facebook.com/intern/id2/1650149948393282/\nXWFEntPartner<XWFEntApplication\n\n// references\nXWFEntCustomer.$(reference)XWFEntCustomerSession,XWFEntDataPack,dotted XWFEntRetailer,XWFEntCustomerDevice,dotted XWFEntUserCredentials\n","fblite1":"mqtt;MQTT\ndns;DNS\nbapi;B-API\ncrash;Crash\\nlogs\nfblite;FB Lite\\napp\nproxygen;Proxygen\ndmg;DMG\napp;App\\nserver\nzerotools\n\nfblite>\"resolve\\nsnaptu-mini.facebook.com\\nsnaptu-p2.facebook.com\\nmqtt-mini.facebook.com\" dns\nfblite>\"connect\" proxygen\nfblite>\"https://www.facebook.com/\\nmobile/\\ngeneric_android_crash_logs/\\n275254692598279\" crash\nfblite>\"https://b-api.facebook.com/\\nmethod/\\nlogging.clientevent\" bapi\nfblite>mqtt\nproxygen>\"add VIP pool name\" dmg\ndmg > \"resolve carrier\" zerotools\n\nif could not detect carrier then\n  dmg>\"serving all content\"fblite\nelseif carrier has no FREE campaign then\n  dmg>\"serving all content\"fblite\nelse\n  dmg > \"resolve eligibility\" zerotools\n  if has no eligibility and hit FREE pool then\n    dmg>\"cancel rendering pipeline\"app\n    dmg>\"reconnect to paid\"fblite\n  elseif has eligibility and hit PAID pool then\n    dmg>\"cancel rendering pipeline\"app\n    dmg>\"reconnect to free\"fblite\n  else\n    dmg>\"serving appropriate content\"fblite\n  endif\nendif\n","fblite_2":"shape diamond\nuc;Coming from unknown carrier?\nnf;Carrier has no pricing campaigns?\ntoggle;Toggle state\\nFBmain.getDialtoneState()\nmini_p;Hit minipool?\nmini_f;Hit minipool?\n\nshape terminator\nrp;Redirect to paid\nrf;Redirect to free\nserve_p;Serve paid\nserve_f;Serve free\n\nshape default\ndc;Dont care\nuser>uc\nuc>nf\nuc>\"yes\"dc\nnf>\"correct\"dc\nnf>\"has pricing\"toggle\ntoggle>\"Paid\"mini_p>\"yes\"rf\ntoggle>\"Free\"mini_f>\"no\"rp\n\nmini_p>serve_p\nmini_f>serve_f\n","data flow in path aggr":"box proxygen\n\nshape database\nzero_slb\nzero_traffic_usage_puma;zero_traffic_\\nusage_puma\n\nshape input\nzero_traffic_usage_1d_hive\nzero_traffic_usage_hive\nzero_traffic_unattributed_data_hive\n\nshape note\nuriaggr;@OLDAGGR\noneday;@ATTRIBUTED1D\nunattr;@UNATTRIBUTED1D\nnewaggr;@NEWAGGR\n\nshape diamond\nstylus\npuma\naggregator\n\nproxygen>\"ALL minipool traffic\\nfree or not\"zero_slb\n>stylus>\"free and some paid\\nattributed\\nunattributed\\nall sources\"zero_traffic_usage_hive\n>aggregator>\"free\\nsources(FFB)\\nUSERS(*)\"uriaggr\n\nstylus>\"just free\\nattributed\\nunattributed\\nall sources\"zero_traffic_usage_puma\n>\"only attributed\\nall sources\"zero_traffic_usage_1d_hive\n,\"only unattributed\\nall sources\"zero_traffic_unattributed_data_hive\n\nzero_traffic_usage_1d_hive>\"free\\nsources(ALL)\\nUSERS(!0)\"oneday\nzero_traffic_unattributed_data_hive>\"free\\nsources(ALL)\\nUSERS(0)\"unattr\nzero_slb>puma>\"~free\\nsources(ALL)\\nUSERS(*)\"newaggr\n","fblite logic launch GK":"diamond gk;Pass launch GK\ngk>\"not passing\\nalways use paid\"paid\n\ndiamond loggedout;Logged out?\ndiamond hascampaign;Has proper\\ncampaign?\ndiamond storedfreetoggled;Stored\\ntoggle mode\\is free?\n\nloggedout>\"yes\\nuse free\"free\n\nloggedout>\"no\"gk>hascampaign>\"no campaign\"paid\nhascampaign>\"yes\"storedfreetoggled>\"yes\"free,\"no\"paid\n\n","output":"c;Client\nr;RestServer\na;APIRunner\ni;Implementation\\nPhotosUploadProfilePicApi\\ngenCall()\n\nc>\"POST https://api.facebook.com\\n/restserver.php\\nfacebook.\\nphotos.\\nuploadProfilePic::genRestServer()\"r\nr>\"call::genCall(photos_uploadProfilePic)\"a\na>\"not sure how\\nphotos_uploadProfilePic\\nis resolved as\\nPhotosUploadProfilePicApi::genCall()\"i\n","fblite_test_init":"$(sideeffect:#cccccc)\n\nterminator return\n\n{group1;DialtoneStickyMode.fetchDialtoneStickyMode()\nfdsm;Make GraphQLRequest\\nZeroToggleStickyMode.ZeroToggleStickyModeString\nfdsm>\"data received\"odr,\"error\"mcoe\nodr;has response and response.getZeroToggleStickyMode()\nodr>\"no\"mcodr>\"yes\"pdm>\"no\"fdm\npdm;GRAPH_QL_PAID_DATA_MODE?\nfdm;GRAPH_QL_FREE_DATA_MODE?\npdm>\"yes\"sdsft>mcodr\ndotted box sdsft$(sideeffect);main.getSessionServices().setDialtoneState(false, true)\nfdm>\"yes\"sdstt>mcodr\ndotted box sdstt$(sideeffect);main.getSessionServices().setDialtoneState(true, true)\nfdm>\"no\"sdsft\nmcodr;callback.onDataReceived()\\nif defined\nmcoe;callback.onError()\\nif defined\nmcodr>return\nmcoe>return\n}\n\n{group2;DialtoneStickyMode.get()\n  isma;isStickyModeAvailable?\n  callback;callback.onDataReceived()\\nif defined\n  isma>\"yes\"callback>\"no\"return\n  isma>\"no\"FBLITE_DEPRECATE_ZR_STICKY_MODE>\"no\"fdsm,\"yes\"isme\n  isme;main.getUserPreferences().getDialtoneStickyModeEnabled()\n  isme>\"nonnull\"callback,\"null\"fdsm\n}\n\n{sds1;setDialtoneState\ndtifepd;dialtoneState.isFeatureEnabled(ZeroCampaignFeature.PHOTO_DIALTONE)\ndtifepd>\"yes\"sdstf1,\"no\"sdsff1\ndotted box sdstf1$(sideeffect);main.getSessionServices().setDialtoneState(true, false)\ndotted box sdsff1$(sideeffect);main.getSessionServices().setDialtoneState(false, false)\n}\n\n{alizr;applyLoggedInZeroRating()\nFBLITE_CACHE_IP_TOKEN2;FBLITE_CACHE_IP_TOKEN\nFBLITE_CACHE_IP_TOKEN2>\"yes\"nzru,\"no\"gnzrc\ngnzrc;rest call\\nget new zero rating campaign\ndotted box nzru$(sideeffect);NewZeroRatingUtils.fetchZeroRatingToken(runtime, billingState, callback)\ngnzrc>\"onError\\ncallback onError\"ret1\ngnzrc>\"onDataReceived\"dseffr>sds1>azr>\"callback onDataReceived()\"ret1\ndotted box dseffr$(sideeffect);dialtoneState.enableFeaturesFromResponse(response)\ndotted box azr$(sideeffect);applyZeroRating(runtime, response)\nret1;done\n}\n\n{ucb;callback code\\nZeroRatingUtils.init()\nonDataReceived2;onDataReceived\nonDataReceived2>\"only when callback activated\"alizr\n\nonError2;onError\nonError2>FBLITE_STICKY_MODE_FALLBACK_TO_PAID>\"yes\"xxx,\"no\"yyy\ndotted box xxx$(sideeffect);ZeroRatingUtils.applyLoggedInZeroRating(runtime, false);\ndotted box yyy$(sideeffect);ZeroRatingUtils.applyLoggedInZeroRating(runtime);\n}\n\n{g;ZeroRatingUtils.init()\nnosession;runtime.getActiveFbUser() != null ? runtime.getActiveFbUser().getFbUserSession()\ndotted box sdsc$(sideeffect);userSession.setDialtoneState(new CachedDialtoneState())\ndotted box sds$(sideeffect);userSession.setDialtoneState(new DialtoneState())\n\nFBLITE_CACHE_IP_TOKEN>\"yes\"sdsc,\"no\"sds\n\nnosession>\"correct\"return\nnosession>FBLITE_CACHE_IP_TOKEN\ndotted box sfdbu$(sideeffect);setFlexDisabledByUser(main.getUserPreferences().getFlexDisabledByUser()\nsdsc,sds>sfdbu>FBLITE_FLEX_REFRESH_ZR_ON_TOGGLE\nFBLITE_FLEX_REFRESH_ZR_ON_TOGGLE>\"not passing, call WITHOUT callback\"isma\nFBLITE_FLEX_REFRESH_ZR_ON_TOGGLE>\"passing, use callback\"ucb>isma\n}\n","example thrift fblite":"user\nunity\ncapi;CampaignAPI\\n(thrift)\ncarrier;CarrierDetection\\n(thrift)\nl;Logger\nuser>\"connect\"unity\nunity.>\"begin carrier detection\"carrier\nunity>\"log request(Carrier:0)\"l\nunity.>\"begin campaign API\"capi\nunity>\"screen\"user\nuser>unity\ncapi.>\"free ok\"unity\nunity>\"log request(Carrier:0)\"l\nunity>user\nunity>\"log request(Carrier:0)\"l\ncarrier.>unity\nuser>unity\nunity>\"log request(1234)\"l\n","restserver.php":"c;Client\nr;RestServer\na;APIRunner\ni;Implementation\\nPhotosUploadProfilePicApi\\ngenCall()\n\nc>\"POST https://api.facebook.com\\n/restserver.php\\nfacebook.\\nphotos.\\nuploadProfilePic::genRestServer()\"r\nr>\"call::genCall(photos_uploadProfilePic)\"a\na>\"not sure how\\nphotos_uploadProfilePic\\nis resolved as\\nPhotosUploadProfilePicApi::genCall()\"i\n","billing domain type":"$(ok:#00ff00)\n$(no:#ff0000)\n\n{applyZeroRating;public ZeroRatingUtils.applyZeroRating()\nazrpaid1;setBillingDomain(PAID)\nazrzero1;setBillingDomain(ZERO)\nazrzp1;setBillingDomain(isZeroPool())\nazrpaid2;setBillingDomain(PAID)\nazrzero2;setBillingDomain(ZERO)\nazrenabled1$(ok);has IPPool?\nazrdisabled1;pass FBLITE_BILLING_DOMAIN_FALLBACK_TO_PAID\nazrnopool1$;pass FBLITE_BILLING_DOMAIN_FALLBACK\n\nazr;response.getStatus()==enabled\nazr>\"enabled\"azrenabled1>\"yes\"azrzp1$(ok),\"no\"azrnopool1$(no)\nazrnopool1$(no)>\n    \"pass\"azrpaid1$(ok),\n    \"fail\"azrzero1$(no)\nazr>\"!enabled\"azrdisabled1$(no)>\n        \"pass\"azrpaid2$(ok),\n        \"fail\"azrzero2$(no)\n}\n\n{applyLoggedOutZeroRating;public applyLoggedOutZeroRating\nglzrip;pass FlexLoggedOutHoldoutQE.INSTANCE\nglzrip1;setBillingDomainType(BillingDomainType.ZERO)\nglzrip2;setBillingDomainType(BillingDomainType.PAID)\nglzrip>\"yes\"glzrip1$(ok),\"no\"glzrip2$(no)\n}\n\n{applyTokenBillingDomain;called from handleCampaignResponse\\nprotected NewZeroRatingUtils.applyTokenBillingDomain()\natbdpaid1;setBillingDomain(PAID)\natbdzero1;setBillingDomain(ZERO)\natbdzp1;setBillingDomain(isZeroPool())\natbdzero2;setBillingDomain(ZERO)\natbdenabled1$(ok);has IPPool?\natbdnopool1$;pass FBLITE_BILLING_DOMAIN_FALLBACK\natbd;response.getStatus()==enabled\natbd>\"enabled\"atbdenabled1>atbdzp1$(ok),atbdnopool1$(no)\natbdnopool1$(no)>\n    \"pass\"atbdpaid1$(ok),\n    \"fail\"atbdzero1$(no)\natbd>\"!enabled\"atbdzero2$(no)\n}\n\n{fetchZeroRatingToken;NewZeroRatingUtils.fetchZeroRatingToken()\nact;Activate cached token\nfnzc1;getNewZeroCampaign \nfnzc2;getNewZeroCampaign \nact>\"failed\"dashed box fnzc1$(no),dashed box fnzc2$(no)\nact>$(ok)\"success\"applyTokenBillingDomain\nfnzc1>applyTokenBillingDomain\nfnzc2>cache_response\n}\n\n{applyLoggedInZeroRating;ZeroRatingUtils.applyLoggedInZeroRating()\npp;FBLITE_CACHE_IP_TOKEN\npp>\"pass\"fetchZeroRatingToken\npp>\"else\"dashed box getNewZeroCampaign$(no)>applyZeroRating\n}\n\nnzru;NewZeroRatingUtils.fetchZeroRatingToken\nalizr;ZeroRatingUtils.applyLoggedInZeroRating\nfcit;FBLITE_CACHE_IP_TOKEN\nalizr>fcit>\"pass\"nzru$(ok)>applyTokenBillingDomain\n\nfbmocic;FacebookMain.onClientIpChanged\nerztocc;Pass EMA_REFRESH_ZERO_TOKEN_ON_CLIENTIP_CHANGE\nfbmocic>erztocc>\"pass\"alizr$(ok)\nlsfortms;LoginScreen.formatOrRedirectToMainScreen\nlsfortms>applyLoggedOutZeroRating\n\nfbmocrl;FacebookMain.onClientReLogin()\\nInvoked when client re-logins to the gateway\\nhis will be called after clientData has been updated to the latest.\\nThis will not be called for the first time session starts when onSessionStart is called.\nfbmoss;FacebookMain.onSessionStart()\nfbmss;FacebookMain.setSession()\n\nzrui;ZeroRatingUtils.init()\nfbmocrl,fbmoss,fbmss>zrui\n\ndashed box dtsm;DialtoneStickyMode.get()\npass99;FBLITE_FLEX_REFRESH_ZR_ON_TOGGLE\nzrui>pass99>\"yes\"dtsm$(ok)>\"success\" dashed box s$(ok),\"failure\" dashed box f$(no)\ns>applyLoggedInZeroRating\nf>applyLoggedInZeroRating\n\n","vmcfg":"$(green:#00ff00)\n$(red:#ff0000)\nvm;Virtual Machine Configuration\nvm>quota\ndoesntexist;Doesn't exist\n\ndecrease;Subtract Quota\nquota>doesntexist,exists\nexists>isfb2\n\nzbr;Zero Balance Redirect\n\n\nisfb2;Is FB destination and\\nhas FB Datapack?\nisfb2>$(green)\"yes\"pass\nisfb2>\"no\"decrease\n\noob;Out Of Balance?\npass;Let all traffic pass\n\nblock;Block all traffic\ndecrease>oob\nfbd;Has FB Data Pack?\noob>\"yes\"zbr\nzbr>\"active &&\\ntrying\\nhttp://portal.fb.com\"redirect\nzbr>\"not active\"fbd\nfbd>$(red)\"no\"block\nisfb;Is FB destination?\nfbd>\"yes\"isfb\nisfb>$(green)\"yes\"pass\nisfb>$(red)\"no\"block\noob>$(green)\"no\"pass\ndoesntexist>$(green)pass","uidslb":"\n\nscribe>\"1234\"SlbTailerLine\n \n{userIDStatus;UserID status\\nsets\\noriginalFBIDFromProxygen_\n MISSING;#ff0000\n PRESENT;#ff0000 PRESENT\\nbut might be crap\n NOTANUMBER;NOT A NUMBER\n}\n\nSlbTailerLine>userIDStatus\n\nZeroSlbTailerLine_getFBIDFromProxygen;ZeroSlbTailerLine::getFBIDFromProxygen\n\nuserIDStatus>ZeroSlbTailerLine_getFBIDFromProxygen\n{getFBIDFromProxygen;getFBIDFromProxygen()\nInstaGramConversion\nUserIdRangeCheck\n}\nZeroSlbTailerLine_getFBIDFromProxygen>getFBIDFromProxygen\n\ngetFBIDFromProxygen>ZeroSlbTailerProcessor>logger\n    \n\ngetUserID>computeAndLogUserID>\ncomputeAndLogUserID>getFBIDFromProxygen\ncomputeAndLogUserID>parseFBLiteMsisdn\ncomputeAndLogUserID>decryptZeroSlbPII\ncomputeAndLogUserID>tryGetUserIDsFromEUI2\ncomputeAndLogUserID>tryGetUserIDsFromEUI\ncomputeAndLogUserID>setFBID,setDatr,setMsisdn,setHasUserIDsSet\n\nprocessAndLogPaidTraffic>getUserID\nprocessLine>getUserID\n\n","header test1":"phone1/phone.png\nphone2/phone.png\nphone3/phone.png\nphone4/phone.png\nphone5/phone.png\nphone6/phone.png\nphone7/phone.png\nphone8/phone.png\nphone9/phone.png\nphone10/phone.png\nphone11/phone.png\n\ncarrier1/basestation.png\ncarrier2/basestation.png\ncarrier3/basestation.png\ncarrier4/basestation.png\n\ncarrier1/monitor.png;Carrier 1119\ncarrier2/monitor.png;Carrier 1284\ncarrier3/monitor.png;Carrier 1465\ncarrier4/monitor.png;Carrier 1111\n\nshape ellipse\n\nphone1>csim1>\"+3580001\"carrier1\nphone2>csim2>\"+3580002\"carrier2\nphone3>csim3>\"+3580003\"carrier3\nphone4>csim4>\"+3580004\"carrier4\n\nphone5>csim5>\"+3580005\"carrier1\nphone6>csim6>\"+3580006\"carrier2\nphone7>csim7>\"+3580007\"carrier3\n\nphone8>csim8>\"+3580008\"carrier1\nphone9>csim9>\"+3580009\"carrier2\nphone10>csim10>\"+3580010\"carrier3\nphone11>csim11>\"+3580011\"carrier4\n\ncarrier1,carrier2,carrier3,carrier4>fb\n","phylotree":"equal maternalY,maternalMT,paternalY,paternalMT\n\nshape box\npaternalY;#0000ffY(I-L258)\nmaternalY;#ff0000Y(???)\nshape ellipse\nmaternalMT;#ff0000mt(X2C1E)\npaternalMT;#0000ffmt(H1A)\n\nshape cloud\nme\n\nmaternalY.maternalMT\npaternalY.paternalMT\n\nmaternalMT,paternalY>me","ytree":"M253;#0000ffI-M253 4700 years ago\\n\\n(M253, M307.2/P203.2, M450/S109\\nP30, P40, L64, L75, L80, L81\\nL118, L121/S62, L123, L124/S64\\nL125/S65, L157.1, L186, and L187)\\nI1\nDF29;#0000ffIDF29 4700 years ago\\n(DF29/S438)\\nI1a\nCTS6364;ICTS6364\\n(CTS6364/Z2336)\\nI1a1\nCTS10028;CTS10028\\nI1a1b\nL22;#0000ffI-L22 4100 years ago\\n\\n(L22/S142)\\nI1a1b1\nCTS11651;CTS11651\\nZ2338\\nI1a1b1a~\nCTS6868;CTS6868\\nI1a1b1a4\nZ74;#0000ffI-Z74 4100 years ago\\nI1a1b1a4a\nCTS2208;#0000ffCTS2208 2900 years ago\\nI1a1b1a4a1~\nCTS7676;CTS7676\nL287;#0000ffI-L287 year 100\\nI1a1b1a4a1a\nL258;#0000ffI-L258 year 200\\n(L258/S335)\\nI1a1b1a4a1a1\nY92046;Y92046\\n1800 ybp\\nbefore present time\nY85056;Y85056\nBY185002;BY185002\\n1650\\nbefore present time\nFT231665;I-FT231665\n\nM253>DF29>CTS6364>CTS10028>L22>CTS11651>CTS6868>\nZ74>CTS2208>CTS7676>L287>L258\n>Y92046>Y85056>BY185002>FT231665\n","staging changes 1":"generator plantuml_sequence\n\ni;User\np;Products and Pricing\ne;Ent(Tao Assoc) etc. expires at 1234\nu;UDFT\nc;CFGR\n\ni>p;Activate Carrier Staging\np.>e;Store\ni>u;Load UDFT\nu<e;Get Carrier Staging Info\nu<c;Get UDFT Staging Optin Info(none)\ni-i;UDFT loaded, presenting Staging Optin\n\ni>u;Opt-In into staging changes\nu>c;Write staging_until=carrier staging expiration time=1234\nc>c;Add Carrier SIM IP to another CFGR\\nif not expired\n\ni-i;Carrier has staging config\ni-i;Simulation is opted in into these changes\ni.i;Time passes and carrier staging expires\ne>e;Expire Carrier Staging\n\ni-i;User loads UDFT\nu<e;Get Carrier Staging Info(NOT staging)\nu<c;Get UDFT Staging Optin Info(staging_until=1234)\ni-i;UDFT loaded, presenting Staging Optin\n","rewerite-rule-diagram":"$(http:#ff0000)\n$(fetch:#008800)\n$(event:#ff0000)\nshape cloud\ninternet\n\n{c;Client\nshape box\ndashed p;Periodically\ndashed n;On Network Change\nf;Fetch\np,n>$(event)f\n\nh;HTTP request\n\n{r;Rules\nshape diamond\nu;Update pending?\n\nshape note\nfr;Free rules\npr;Paid rules\n\nu->$(http)\"YES\\nAlways use FREE rules\"fr\nu->$(http)\"NO\\nUse rule\\nper mode\"fr,pr\n}\n\nf.>$(fetch)\"Update rules\\nonce\\nfetched\"r\n\nh->$(http)r\nr->$(http)internet\n}\n\nshape ellipse\na;Campaign API\n\nf<$(fetch)\"return\\nrewrite rules for\\n URLs, MQTT endpoints,\\n(soon) GraphQL\"a\n\n\n","eui2":"app;Mobile Device\nwww;GraphQL/WWW\ncdn;FBCDN\\n(proxygen)\ntailer;Traffic tailer\n\napp>www;Fetch new feed links\n\nwww>www;Add encrypted\\nnc_eui to\\nCDN URLs\n\nwww>app;Serve CDN URLs\n\napp>cdn;Load resource\ncdn>tailer;Decrypt\n\n\n\n","supportstack":"completion<(\n    rollout,\n    lodestone,\n    auxillary_targets,\n    code)\n\ncode<(\n    relocation,\n    new_implementation)\n\nrelocation<(\n    move,\n    copy)\n\nauxillary_targets<(\n    onboarding,\n    cut)\n    \nrollout<(\n    gk_switch)\n\nreleocation;Simple MOVE refactor first?\ncut;Which cut we aim for? R70?\nonboarding;When we want first teams to onboard?\\nend of H1\\nbeg of H2\nlodestone;Lodestone tests to ensure all is well\ngk_switch;GK to switch btw. implementation??\\nThis requires both present, NOT moved\ncopy;Duplicate implementations? ie.copy\nmove;Or just relocate the existing code\\npackage names change\\ncode change separate\ngk_switch-code\n","preloads QEs":"box OxpQeManager>box OxpQeMethod>cloud server > parseQEs\n\n\nbox UpdateSchedulerUseCase>syncQuickExperiments>\"mQeManager.updateFromServer\"OxpQeManager\n\nparseQEs>\"handleExperimentDataSync\" box QeManager\n\nQeManager>\"save fetch time to prefs\" diamond sharedPrefs\nsharedPrefs>box OxpQeListenerDispatcher\n"}
